(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{105:function(e,t,a){e.exports=a(123)},123:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(8),c=a.n(o),i=a(37),l=a(22);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(41),u=a(38),m=a(10),p=a(154),E=a(155),d=a(156),h=a(157),f=a(158),g=a(160),y=a(161),b=a(162),v=a(163),O=a(55),T=a(171),S=a(173),A=a(91),C=a(15),_=a(96),j=a(159),k=a(93),L=a.n(k),I=a(63),w=a.n(I),P=a(86),N=a.n(P),x=a(88),R=a.n(x),D=a(89),H=a.n(D),Q=a(90),F=a.n(Q),M=[{title:"News",link:"/",icon:n.a.createElement(N.a,null)},{title:"Settings",link:"/settings",icon:n.a.createElement(R.a,null)},{title:"Help",link:"/help",icon:n.a.createElement(H.a,null)},{title:"About",link:"/about",icon:n.a.createElement(F.a,null)}],z=Object(A.a)((function(e){return{root:{display:"flex"},drawer:Object(m.a)({},e.breakpoints.up("sm"),{width:320,flexShrink:0}),appBar:Object(m.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(320,"px)"),marginLeft:320}),menuButton:Object(m.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:320},content:{flexGrow:1,padding:e.spacing(3)}}}));var G=Object(l.b)((function(e){var t=e.uiParams;return{darkTheme:t.darkTheme,fontSize:t.fontSize}}),(function(e,t){t.articleService;return{}}))((function(e){var t=z(),a=Object(C.a)(),r=Object(_.a)({palette:{primary:{light:w.a[600],main:w.a[500],dark:w.a[400]},type:e.darkTheme?"dark":"light"},typography:{fontSize:e.fontSize}}),o=n.a.useState(!1),c=Object(u.a)(o,2),l=c[0],s=c[1],m=function(){s(!l)},A=n.a.createElement("div",null,n.a.createElement("div",{className:t.toolbar}),n.a.createElement(p.a,null),n.a.createElement(E.a,null,M.map((function(e,t){return n.a.createElement(i.b,{to:e.link,key:t,style:{textDecoration:"none",color:"initial"}},n.a.createElement(d.a,{button:!0,key:e.title},n.a.createElement(h.a,null,e.icon),n.a.createElement(f.a,{primary:e.title})))}))),n.a.createElement(p.a,null));return n.a.createElement(j.a,{theme:r},n.a.createElement("div",{className:t.root},n.a.createElement(g.a,null),n.a.createElement(y.a,{position:"fixed",className:t.appBar},n.a.createElement(b.a,null,n.a.createElement(v.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:m,className:t.menuButton},n.a.createElement(L.a,null)),n.a.createElement(O.a,{variant:"h6",noWrap:!0},"News App"))),n.a.createElement("nav",{className:t.drawer,"aria-label":"mailbox folders"},n.a.createElement(T.a,{smUp:!0,implementation:"css"},n.a.createElement(S.a,{variant:"temporary",anchor:"rtl"===a.direction?"right":"left",open:l,onClose:m,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0}},A)),n.a.createElement(T.a,{xsDown:!0,implementation:"css"},n.a.createElement(S.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0},A))),n.a.createElement("main",{className:t.content},n.a.createElement("div",{className:t.toolbar}),e.children)))})),Y=a(168),U=a(16),B=a(12),W=a(31),q=a(32),Z=a(33),J=a(94),K=a.n(J),V=a(164),$=a(165),X=a(166),ee=a(167),te=a(35),ae=a.n(te),re=function(e){return ae()(e,ae.a.ISO_8601).format("YYYY-MM-DD")},ne=function(e){return ae()(e,"YYYY-MM-DD").toISOString()},oe=Object(A.a)({root:{maxWidth:845,marginBottom:50},media:{}}),ce=function(e){var t,a=e.article,r=oe();return n.a.createElement(V.a,{className:r.root},n.a.createElement($.a,null,n.a.createElement(i.b,{to:"/articles/".concat(a.id),style:{textDecoration:"none",color:"initial"}},n.a.createElement(X.a,{className:r.media,image:a.urlToImage,component:"img"}),n.a.createElement(ee.a,null,n.a.createElement(O.a,{gutterBottom:!0,variant:"h5",component:"h2"},a.title),n.a.createElement(O.a,{variant:"h5",color:"textSecondary",component:"p"},(t=a.publishedAt,ae()(t,ae.a.ISO_8601).format("DD MMMM YYYY"))),n.a.createElement(O.a,{variant:"body2",color:"textSecondary",component:"p"},a.description)))))},ie=a(54),le=a.n(ie),se=a(70),ue=function(){function e(){var t=this;Object(U.a)(this,e),this.apiKey="354d6c6676cf477683e5b3651d76321c",this.currentDate="2020-02-01",this.getArticles=function(){var e=Object(se.a)(le.a.mark((function e(a,r,n,o,c){var i;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource(a,r,n,o,c);case 2:return i=e.sent,console.log("res.articles.map(this._transformArticles)",i.articles.map(t._transformArticles)),e.abrupt("return",{totalArticles:i.totalResults,articles:i.articles.map(t._transformArticles)});case 5:case"end":return e.stop()}}),e)})));return function(t,a,r,n,o){return e.apply(this,arguments)}}(),this._transformArticles=function(e){return{id:"_"+Math.random().toString(36).substr(2,9),title:e.title,description:e.description,urlToImage:e.urlToImage,publishedAt:e.publishedAt,content:e.content}}}return Object(B.a)(e,[{key:"getResource",value:function(){var e=Object(se.a)(le.a.mark((function e(t){var a,r,n,o,c,i,l,s=arguments;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:5,r=s.length>2&&void 0!==s[2]?s[2]:1,n=s.length>3?s[3]:void 0,o=s.length>4?s[4]:void 0,c="https://newsapi.org/v2/everything?q=".concat(t,"&from=").concat(n,"&to=").concat(o,"&sortBy=publishedAt&apiKey=").concat(this.apiKey,"&pageSize=").concat(a,"&page=").concat(r),console.log("fetch ".concat(c)),e.next=8,fetch(c);case 8:if((i=e.sent).ok){e.next=11;break}throw new Error("Could not ferch ".concat(c,", received ").concat(i.status));case 11:return e.next=13,i.json();case 13:return l=e.sent,e.abrupt("return",l);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),me=r.createContext({articleService:new ue}),pe=me.Provider,Ee=me.Consumer,de=function(e){return function(t){return r.createElement(Ee,null,(function(a){return r.createElement(e,Object.assign({},t,{articleService:null===a||void 0===a?void 0:a.articleService}))}))}},he=function(e,t){return function(a,r,n,o,c){t(function(e){return{type:"FETCH_ARTICLE_REQUEST",payload:{q:e}}}(a)),e.getArticles(a,r,n,o,c).then((function(e){t({type:"FETCH_ARTICLE_SUCCESS",payload:e})})).catch((function(e){return t({type:"FETCH_ARTICLE_FAILURE",payload:e})}))}},fe=function(e){return function(t){e(function(e){return{type:"FROM_DATE_CHANGE",payload:e}}(t))}},ge=function(e){return function(t){e(function(e){return{type:"TO_DATE_CHANGE",payload:e}}(t))}},ye=function(e){return function(t){e(function(e){return{type:"PAGE_SIZE_CHANGE",payload:e}}(t))}},be=function(e){return function(t){e({type:"QUERTY_INPUT_CHANGE",payload:t})}},ve=function(e){return function(){e({type:"THEME_CHANGE"})}},Oe=function(e){return function(t){e(function(e){return{type:"FONT_SIZE_CHANGE",payload:e}}(t))}},Te=a(95),Se=a.n(Te),Ae=function(){return n.a.createElement("object",{type:"image/svg+xml",data:Se.a})},Ce=function(e){var t=e.items,a=e.loadMoreArticles,r=e.totalArticles,o=e.page,c=e.pageSize;return n.a.createElement(K.a,{pageStart:1,hasMore:o*c<r||1===o,useWindow:!0,loadMore:a,loader:n.a.createElement(Ae,{key:o}),key:o},t)},_e=function(e){function t(){var e,a;Object(U.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(W.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(o)))).getArticleListItems=function(){var e=[];return a.props.articles.map((function(t,a){return e.push(n.a.createElement(ce,{article:t,key:t.id}))})),e},a}return Object(Z.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){}},{key:"getPageNews",value:function(){var e=this;return function(t){console.log("page",e.props.page),e.props.fetchArticles(e.props.q,e.props.pageSize,e.props.page,e.props.from,e.props.to)}}},{key:"render",value:function(){return this.props.error?n.a.createElement("div",null,"Error"):n.a.createElement(Ce,{items:this.getArticleListItems(),loadMoreArticles:this.getPageNews(),totalArticles:this.props.totalArticles,page:this.props.page,pageSize:this.props.pageSize})}}]),t}(r.Component),je=de(Object(l.b)((function(e){var t=e.articleList,a=t.articles,r=t.totalArticles,n=t.articlesQuertyParams;return{articles:a,totalArticles:r,q:n.q,pageSize:n.pageSize,page:n.page,from:n.from,to:n.to,error:t.error}}),(function(e,t){var a=t.articleService;return{fetchArticles:he(a,e)}}))(_e)),ke=a(170),Le=function(e){function t(){return Object(U.a)(this,t),Object(W.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.from,r=t.to,o=re(a),c=re(r);return n.a.createElement("form",null,n.a.createElement(ke.a,{id:"dateFromInput",label:"Date from",type:"date",defaultValue:o,onChange:function(t){return e.props.fromDateOnChange(t.target.value)},InputLabelProps:{shrink:!0}}),n.a.createElement(ke.a,{id:"dateToInput",label:"Date to",type:"date",defaultValue:c,onChange:function(t){return e.props.toDateOnChange(t.target.value)},InputLabelProps:{shrink:!0}}))}}]),t}(r.Component),Ie=function(e){function t(){return Object(U.a)(this,t),Object(W.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(B.a)(t,[{key:"toDateChange",value:function(){var e=this;return function(t){e.props.setToDateToState(t)}}},{key:"fromDateChange",value:function(){var e=this;return function(t){e.props.setFromDateToState(t)}}},{key:"render",value:function(){var e=this.props,t=e.from,a=e.to;return n.a.createElement(Le,{from:t,to:a,fromDateOnChange:this.fromDateChange(),toDateOnChange:this.toDateChange()})}}]),t}(r.Component),we=Object(l.b)((function(e){var t=e.articleList.articlesQuertyParams;return{from:t.from,to:t.to}}),(function(e,t){t.articleService;return{setQuertyToState:be(e),setFromDateToState:fe(e),setToDateToState:ge(e)}}))(Ie),Pe=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Y.a,{maxWidth:"lg"},n.a.createElement(we,null),n.a.createElement(je,null)))},Ne=a(73),xe=Object(Ne.b)({accessToken:"pk.eyJ1IjoiYW5kcnJyOTYiLCJhIjoiY2s2aW81bTR6MDM0azNybnQwd2t3ZHhybyJ9.sOZgiiOJ5ai23hEZcCSczw"}),Re=function(e){function t(){return Object(U.a)(this,t),Object(W.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return n.a.createElement(xe,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"70vh",width:"40vw"},center:[135.067192,48.468523],zoom:[15]},n.a.createElement(Ne.a,{coordinates:[135.067192,48.468523]},n.a.createElement("h1",null,"Fogstream")))}}]),t}(r.Component),De=function(){return n.a.createElement(Re,null)},He=a(169),Qe=a(174),Fe=function(e){function t(){return Object(U.a)(this,t),Object(W.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("form",{noValidate:!0},n.a.createElement(ke.a,{id:"number-of-loaded-items-input",label:"Number of loaded items",variant:"outlined",value:this.props.pageSize.toString(),onChange:function(t){return e.props.setQuertyToState(+t.target.value)}}),n.a.createElement(ke.a,{id:"font-size-input",label:"Font size",variant:"outlined",value:this.props.fontSize.toString(),onChange:function(t){return e.props.changeFontSize(+t.target.value)}}),n.a.createElement(He.a,{control:n.a.createElement(Qe.a,{checked:this.props.darkTheme,onChange:this.props.changeTheme,value:"DarkTheme",color:"primary"}),label:"Dark theme"}))}}]),t}(r.Component),Me=Object(l.b)((function(e){var t=e.articleList.articlesQuertyParams.pageSize,a=e.uiParams;return{pageSize:t,darkTheme:a.darkTheme,fontSize:a.fontSize}}),(function(e,t){t.articleService;return{setQuertyToState:ye(e),changeTheme:ve(e),changeFontSize:Oe(e)}}))(Fe),ze=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Y.a,{maxWidth:"lg"},n.a.createElement(Me,null)))},Ge=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."))},Ye=Object(A.a)({root:{maxWidth:845,marginBottom:50},media:{}}),Ue=Object(l.b)((function(e){return{articles:e.articleList.articles}}))((function(e){var t=e.articles,a=Object(s.f)().id,r=t.find((function(e){return e.id===a})),o=Ye();return n.a.createElement(V.a,{className:o.root},n.a.createElement(X.a,{className:o.media,image:null===r||void 0===r?void 0:r.urlToImage,component:"img"}),n.a.createElement(ee.a,null,n.a.createElement(O.a,{gutterBottom:!0,variant:"h5",component:"h2"},null===r||void 0===r?void 0:r.title),n.a.createElement(O.a,{variant:"h5",color:"textSecondary",component:"p"}),n.a.createElement(O.a,{variant:"body1",color:"textSecondary",component:"p"},null===r||void 0===r?void 0:r.content)))})),Be=function(){return n.a.createElement(G,null,n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/",component:Pe,exact:!0}),n.a.createElement(s.a,{path:"/articles/:id",component:Ue}),n.a.createElement(s.a,{path:"/settings",component:ze,exact:!0}),n.a.createElement(s.a,{path:"/help",component:Ge,exact:!0}),n.a.createElement(s.a,{path:"/about",component:De,exact:!0})))},We=a(57),qe=a(14),Ze=ae()().day(0).toISOString(),Je=ae()().toISOString();console.log("fromDate",Ze);var Ke={articles:[],totalArticles:0,articlesQuertyParams:{q:"bitcoin",pageSize:5,page:1,from:Ze,to:Je},loading:!0,error:null};console.log("From: ",Ke.articlesQuertyParams.from),console.log("To: ",Ke.articlesQuertyParams.to);var Ve=function(e,t){if(void 0===e)return Ke;switch(t.type){case"FETCH_ARTICLE_REQUEST":return console.log("FETCH_ARTICLE_REQUEST"),Object(qe.a)({},e.articleList,{articlesQuertyParams:Object(qe.a)({page:1,q:t.payload.q},e.articleList.articlesQuertyParams),loading:!0,error:null});case"FETCH_ARTICLE_SUCCESS":return console.log("FETCH_ARTICLE_SUCCESS"),console.log(t.payload),Object(qe.a)({},e.articleList,{articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{page:e.articleList.articlesQuertyParams.page+1}),articles:e.articleList.articles.concat(t.payload.articles),totalArticles:t.payload.totalArticles,loading:!1,error:null});case"FETCH_ARTICLE_EMPTY_RESULT":return console.log("FETCH_ARTICLE_EMPTY_RESULT"),Object(qe.a)({},e.articleList,{articles:[],loading:!1,error:null});case"FETCH_ARTICLE_FAILURE":return console.log("FETCH_ARTICLE_FAILURE"),Object(qe.a)({},e.articleList,{articles:[],loading:!1,error:t.payload});case"SET_ARTICLE_QUERTY_PARAMS":return console.log("SET_ARTICLE_QUERTY_PARAMS"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},t.payload)});case"QUERTY_INPUT_CHANGE":return console.log("QUERTY_INPUT_CHANGE"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{q:t.payload})});case"FROM_DATE_CHANGE":return console.log("FROM_DATE_CHANGE"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{page:1,from:ne(t.payload)})});case"TO_DATE_CHANGE":return console.log("TO_DATE_CHANGE"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{page:1,to:ne(t.payload)})});case"PAGE_SIZE_CHANGE":return console.log("PAGE_SIZE_CHANGE"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{page:1,pageSize:t.payload})});default:return e.articleList}},$e={darkTheme:!1,fontSize:12},Xe=function(e,t){if(void 0===e)return $e;switch(t.type){case"THEME_CHANGE":return console.log("THEME_CHANGE"),Object(qe.a)({},e.uiParams,{darkTheme:!e.uiParams.darkTheme});case"FONT_SIZE_CHANGE":return console.log("FONT_SIZE_CHANGE"),Object(qe.a)({},e.uiParams,{fontSize:t.payload});default:return e.uiParams}},et=Object(We.b)((function(e,t){return{articleList:Ve(e,t),uiParams:Xe(e,t)}})),tt=new ue;c.a.render(n.a.createElement(l.a,{store:et},n.a.createElement(pe,{value:{articleService:tt}},n.a.createElement(i.a,null,n.a.createElement(Be,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},95:function(e,t,a){e.exports=a.p+"static/media/spinner.3b84cf99.svg"}},[[105,1,2]]]);
//# sourceMappingURL=main.4101dd81.chunk.js.map