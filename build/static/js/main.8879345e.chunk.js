(this["webpackJsonpnews-app"]=this["webpackJsonpnews-app"]||[]).push([[0],{100:function(e,t,a){e.exports=a(121)},113:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(9),c=a.n(o),i=a(33),l=a(20);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(36),u=a(48),m=a(10),p=a(152),E=a(153),f=a(154),d=a(155),g=a(156),h=a(158),b=a(159),y=a(160),v=a(161),T=a(54),S=a(171),O=a(173),A=a(86),C=a(14),_=a(91),j=a(157),P=a(88),L=a.n(P),k=a(62),I=a.n(k),N=function(e,t){return function(a,r,n,o,c){t(function(e){return{type:"FETCH_ARTICLE_REQUEST",payload:{q:e}}}(a)),e.getArticles(a,r,n,o,c).then((function(e){t({type:"FETCH_ARTICLE_SUCCESS",payload:e})})).catch((function(e){return t({type:"FETCH_ARTICLE_FAILURE",payload:e})}))}},w=function(e){return function(t){console.log("setFromDateToState"),e(function(e){return{type:"FROM_DATE_CHANGE",payload:e}}(t))}},D=function(e){return function(t){console.log("setToDateToState"),e(function(e){return{type:"TO_DATE_CHANGE",payload:e}}(t))}},R=function(e){return function(t){console.log("setPageSizeToState",t),e(function(e){return{type:"PAGE_SIZE_CHANGE",payload:e}}(t))}},H=function(e){return function(t){console.log("setQuertyToState"),e({type:"QUERTY_INPUT_CHANGE",payload:t})}},x=function(e){return function(){console.log("changeTheme"),e({type:"THEME_CHANGE"})}},F=function(e){return function(t){console.log("changeFontSize"),e(function(e){return{type:"FONT_SIZE_CHANGE",payload:e}}(t))}},Q=a(81),z=a.n(Q),M=a(83),G=a.n(M),U=a(84),Y=a.n(U),B=a(85),q=a.n(B),W=[{title:"News",link:"/",icon:n.a.createElement(z.a,null)},{title:"Settings",link:"/settings",icon:n.a.createElement(G.a,null)},{title:"Help",link:"/help",icon:n.a.createElement(Y.a,null)},{title:"About",link:"/about",icon:n.a.createElement(q.a,null)}],Z=Object(A.a)((function(e){return{root:{display:"flex"},drawer:Object(m.a)({},e.breakpoints.up("sm"),{width:320,flexShrink:0}),appBar:Object(m.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(320,"px)"),marginLeft:320}),menuButton:Object(m.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:320},content:{flexGrow:1,padding:e.spacing(3)}}}));var K=Object(l.b)((function(e){var t=e.uiParams;return{darkTheme:t.darkTheme,fontSize:t.fontSize}}),(function(e,t){t.articleService;return{changeTheme:x(e)}}))((function(e){var t=Z(),a=Object(C.a)(),r=Object(_.a)({palette:{primary:{light:I.a[600],main:I.a[500],dark:I.a[400]},type:e.darkTheme?"dark":"light"},typography:{fontSize:e.fontSize}}),o=n.a.useState(!1),c=Object(u.a)(o,2),l=c[0],s=c[1],m=function(){s(!l)},A=n.a.createElement("div",null,n.a.createElement("div",{className:t.toolbar}),n.a.createElement(p.a,null),n.a.createElement(E.a,null,W.map((function(e,t){return n.a.createElement(i.b,{to:e.link,style:{textDecoration:"none",color:"initial"}},n.a.createElement(f.a,{button:!0,key:e.title},n.a.createElement(d.a,null,e.icon),n.a.createElement(g.a,{primary:e.title})))}))),n.a.createElement(p.a,null));return n.a.createElement(j.a,{theme:r},n.a.createElement("div",{className:t.root},n.a.createElement(h.a,null),n.a.createElement(b.a,{position:"fixed",className:t.appBar},n.a.createElement(y.a,null,n.a.createElement(v.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:m,className:t.menuButton},n.a.createElement(L.a,null)),n.a.createElement(T.a,{variant:"h6",noWrap:!0},"News App"))),n.a.createElement("nav",{className:t.drawer,"aria-label":"mailbox folders"},n.a.createElement(S.a,{smUp:!0,implementation:"css"},n.a.createElement(O.a,{variant:"temporary",anchor:"rtl"===a.direction?"right":"left",open:l,onClose:m,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0}},A)),n.a.createElement(S.a,{xsDown:!0,implementation:"css"},n.a.createElement(O.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0},A))),n.a.createElement("main",{className:t.content},n.a.createElement("div",{className:t.toolbar}),e.children)))})),V=a(168),J=a(23),$=a(16),X=a(39),ee=a(40),te=a(42),ae=a(89),re=a.n(ae),ne=a(162),oe=a(163),ce=a(164),ie=a(165),le=a(166),se=a(167),ue=a(31),me=a.n(ue),pe=function(e){return me()(e,me.a.ISO_8601).format("YYYY-MM-DD")},Ee=function(e){return me()(e,"YYYY-MM-DD").toISOString()},fe=(a(113),Object(A.a)({root:{maxWidth:845,marginBottom:50},media:{}})),de=function(e){var t,a=e.article,r=fe();return n.a.createElement(ne.a,{className:r.root},n.a.createElement(oe.a,null,n.a.createElement(i.b,{to:"/articles/".concat(a.id),style:{textDecoration:"none",color:"initial"}},n.a.createElement(ce.a,{className:r.media,image:a.urlToImage,component:"img"}),n.a.createElement(ie.a,null,n.a.createElement(T.a,{gutterBottom:!0,variant:"h5",component:"h2"},a.title),n.a.createElement(T.a,{variant:"h5",color:"textSecondary",component:"p"},(t=a.publishedAt,me()(t,me.a.ISO_8601).format("DD MMMM YYYY"))),n.a.createElement(T.a,{variant:"body2",color:"textSecondary",component:"p"},a.description)))),n.a.createElement(le.a,null,n.a.createElement(se.a,{size:"small",color:"primary"},"Learn More")))},ge=a(53),he=a.n(ge),be=a(70),ye=function(){function e(){var t=this;Object(J.a)(this,e),this.apiKey="354d6c6676cf477683e5b3651d76321c",this.currentDate="2020-02-01",this.getArticles=function(){var e=Object(be.a)(he.a.mark((function e(a,r,n,o,c){var i;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource(a,r,n,o,c);case 2:return i=e.sent,console.log("res.articles.map(this._transformArticles)",i.articles.map(t._transformArticles)),e.abrupt("return",{totalArticles:i.totalResults,articles:i.articles.map(t._transformArticles)});case 5:case"end":return e.stop()}}),e)})));return function(t,a,r,n,o){return e.apply(this,arguments)}}(),this._transformArticles=function(e){return{id:"_"+Math.random().toString(36).substr(2,9),title:e.title,description:e.description,urlToImage:e.urlToImage,publishedAt:e.publishedAt,content:e.content}}}return Object($.a)(e,[{key:"getResource",value:function(){var e=Object(be.a)(he.a.mark((function e(t){var a,r,n,o,c,i,l,s=arguments;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:5,r=s.length>2&&void 0!==s[2]?s[2]:1,n=s.length>3?s[3]:void 0,o=s.length>4?s[4]:void 0,c="https://newsapi.org/v2/everything?q=".concat(t,"&from=").concat(n,"&to=").concat(o,"&sortBy=publishedAt&apiKey=").concat(this.apiKey,"&pageSize=").concat(a,"&page=").concat(r),console.log("fetch ".concat(c)),e.next=8,fetch(c);case 8:if((i=e.sent).ok){e.next=11;break}throw new Error("Could not ferch ".concat(c)+", received ".concat(i.status));case 11:return e.next=13,i.json();case 13:return l=e.sent,e.abrupt("return",l);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ve=r.createContext({articleService:new ye}),Te=ve.Provider,Se=ve.Consumer,Oe=function(e){return function(t){return r.createElement(Se,null,(function(a){return r.createElement(e,Object.assign({},t,{articleService:null===a||void 0===a?void 0:a.articleService}))}))}},Ae=(a(115),a(90)),Ce=a.n(Ae),_e=function(){return n.a.createElement("object",{type:"image/svg+xml",data:Ce.a})},je=(a(116),function(e){var t=e.items,a=e.loadMoreArticles,r=e.totalArticles,o=e.page,c=e.pageSize;return n.a.createElement(re.a,{pageStart:1,hasMore:o*c<r||1===o,useWindow:!0,loadMore:a,loader:n.a.createElement(_e,null)},t)}),Pe=function(e){function t(){var e,a;Object(J.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(a=Object(X.a)(this,(e=Object(ee.a)(t)).call.apply(e,[this].concat(o)))).getArticleListItems=function(){var e=[];return a.props.articles.map((function(t,a){e.push(n.a.createElement(de,{article:t,key:a}))})),e},a}return Object(te.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){}},{key:"getPageNews",value:function(){var e=this;return function(t){console.log("page",e.props.page),e.props.fetchArticles(e.props.q,e.props.pageSize,e.props.page,e.props.from,e.props.to)}}},{key:"render",value:function(){return this.props.error?n.a.createElement("div",null,"Error"):n.a.createElement(je,{items:this.getArticleListItems(),loadMoreArticles:this.getPageNews(),totalArticles:this.props.totalArticles,page:this.props.page,pageSize:this.props.pageSize})}}]),t}(r.Component),Le=Oe(Object(l.b)((function(e){var t=e.articleList,a=t.articles,r=t.totalArticles,n=t.articlesQuertyParams;return{articles:a,totalArticles:r,q:n.q,pageSize:n.pageSize,page:n.page,from:n.from,to:n.to,error:t.error}}),(function(e,t){var a=t.articleService;return{fetchArticles:N(a,e)}}))(Pe)),ke=a(170),Ie=(a(117),function(e){function t(){return Object(J.a)(this,t),Object(X.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.from,r=t.to,o=pe(a),c=pe(r);return n.a.createElement("form",null,n.a.createElement(ke.a,{id:"dateFromInput",label:"Date from",type:"date",defaultValue:o,onChange:function(t){return e.props.fromDateOnChange(t.target.value)},InputLabelProps:{shrink:!0}}),n.a.createElement(ke.a,{id:"dateToInput",label:"Date to",type:"date",defaultValue:c,onChange:function(t){return e.props.toDateOnChange(t.target.value)},InputLabelProps:{shrink:!0}}))}}]),t}(r.Component)),Ne=function(e){function t(){return Object(J.a)(this,t),Object(X.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object($.a)(t,[{key:"toDateChange",value:function(){var e=this;return function(t){e.props.setToDateToState(t)}}},{key:"fromDateChange",value:function(){var e=this;return function(t){e.props.setFromDateToState(t)}}},{key:"render",value:function(){var e=this.props,t=e.from,a=e.to;return n.a.createElement(Ie,{from:t,to:a,fromDateOnChange:this.fromDateChange(),toDateOnChange:this.toDateChange()})}}]),t}(r.Component),we=Object(l.b)((function(e){var t=e.articleList.articlesQuertyParams;return{from:t.from,to:t.to}}),(function(e,t){t.articleService;return{setQuertyToState:H(e),setFromDateToState:w(e),setToDateToState:D(e)}}))(Ne),De=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(V.a,{maxWidth:"lg"},n.a.createElement(we,null),n.a.createElement(Le,null)))},Re=function(){return n.a.createElement("div",null,"AboutPage")},He=a(169),xe=a(174),Fe=function(e){function t(){return Object(J.a)(this,t),Object(X.a)(this,Object(ee.a)(t).apply(this,arguments))}return Object(te.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("form",{noValidate:!0},n.a.createElement(ke.a,{id:"number-of-loaded-items-input",label:"Number of loaded items",variant:"outlined",value:this.props.pageSize.toString(),onChange:function(t){return e.props.setQuertyToState(+t.target.value)}}),n.a.createElement(ke.a,{id:"font-size-input",label:"Font size",variant:"outlined",value:this.props.fontSize.toString(),onChange:function(t){return e.props.changeFontSize(+t.target.value)}}),n.a.createElement(He.a,{control:n.a.createElement(xe.a,{checked:this.props.darkTheme,onChange:this.props.changeTheme,value:"DarkTheme",color:"primary"}),label:"Dark theme"}))}}]),t}(r.Component),Qe=Object(l.b)((function(e){var t=e.articleList.articlesQuertyParams.pageSize,a=e.uiParams;return{pageSize:t,darkTheme:a.darkTheme,fontSize:a.fontSize}}),(function(e,t){t.articleService;return{setQuertyToState:R(e),changeTheme:x(e),changeFontSize:F(e)}}))(Fe),ze=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(V.a,{maxWidth:"lg"},n.a.createElement(Qe,null)))},Me=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,"HelpPage"))},Ge=(a(118),a(119),Object(A.a)({root:{maxWidth:845,marginBottom:50},media:{}})),Ue=Object(l.b)((function(e){return{articles:e.articleList.articles}}))((function(e){var t=e.articles,a=Object(s.f)().id,r=t.find((function(e){return e.id===a})),o=Ge();return n.a.createElement(ne.a,{className:o.root},n.a.createElement(ce.a,{className:o.media,image:null===r||void 0===r?void 0:r.urlToImage,component:"img"}),n.a.createElement(ie.a,null,n.a.createElement(T.a,{gutterBottom:!0,variant:"h5",component:"h2"},null===r||void 0===r?void 0:r.title),n.a.createElement(T.a,{variant:"h5",color:"textSecondary",component:"p"}),n.a.createElement(T.a,{variant:"body1",color:"textSecondary",component:"p"},null===r||void 0===r?void 0:r.content)))})),Ye=function(){return n.a.createElement(K,null,n.a.createElement(s.c,null,n.a.createElement(s.a,{path:"/",component:De,exact:!0}),n.a.createElement(s.a,{path:"/articles/:id",component:Ue}),n.a.createElement(s.a,{path:"/settings",component:ze,exact:!0}),n.a.createElement(s.a,{path:"/help",component:Me,exact:!0}),n.a.createElement(s.a,{path:"/about",component:Re,exact:!0})))},Be=a(56),qe=a(13),We=me()().toISOString(),Ze={articles:[],totalArticles:0,articlesQuertyParams:{q:"bitcoin",pageSize:5,page:1,from:me()().day(0).toISOString(),to:We},loading:!0,error:null};console.log("From: ",Ze.articlesQuertyParams.from),console.log("To: ",Ze.articlesQuertyParams.to);var Ke=function(e,t){if(void 0===e)return Ze;switch(t.type){case"FETCH_ARTICLE_REQUEST":return console.log("FETCH_ARTICLE_REQUEST"),Object(qe.a)({},e.articleList,{articlesQuertyParams:Object(qe.a)({page:1,q:t.payload.q},e.articleList.articlesQuertyParams),loading:!0,error:null});case"FETCH_ARTICLE_SUCCESS":return console.log("FETCH_ARTICLE_SUCCESS"),console.log(t.payload),Object(qe.a)({},e.articleList,{articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{page:e.articleList.articlesQuertyParams.page+1}),articles:e.articleList.articles.concat(t.payload.articles),totalArticles:t.payload.totalArticles,loading:!1,error:null});case"FETCH_ARTICLE_EMPTY_RESULT":return console.log("FETCH_ARTICLE_EMPTY_RESULT"),Object(qe.a)({},e.articleList,{articles:[],loading:!1,error:null});case"FETCH_ARTICLE_FAILURE":return console.log("FETCH_ARTICLE_FAILURE"),Object(qe.a)({},e.articleList,{articles:[],loading:!1,error:t.payload});case"SET_ARTICLE_QUERTY_PARAMS":return console.log("SET_ARTICLE_QUERTY_PARAMS"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},t.payload)});case"QUERTY_INPUT_CHANGE":return console.log("QUERTY_INPUT_CHANGE"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{q:t.payload})});case"FROM_DATE_CHANGE":return console.log("FROM_DATE_CHANGE"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{page:1,from:Ee(t.payload)})});case"TO_DATE_CHANGE":return console.log("TO_DATE_CHANGE"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{page:1,to:Ee(t.payload)})});case"PAGE_SIZE_CHANGE":return console.log("PAGE_SIZE_CHANGE"),Object(qe.a)({},e.articleList,{articles:[],articlesQuertyParams:Object(qe.a)({},e.articleList.articlesQuertyParams,{page:1,pageSize:t.payload})});default:return e.articleList}},Ve={darkTheme:!1,fontSize:12},Je=function(e,t){if(void 0===e)return Ve;switch(t.type){case"THEME_CHANGE":return console.log("THEME_CHANGE"),Object(qe.a)({},e.uiParams,{darkTheme:!e.uiParams.darkTheme});case"FONT_SIZE_CHANGE":return console.log("FONT_SIZE_CHANGE"),Object(qe.a)({},e.uiParams,{fontSize:t.payload});default:return e.uiParams}},$e=Object(Be.b)((function(e,t){return{articleList:Ke(e,t),uiParams:Je(e,t)}})),Xe=(a(120),new ye);c.a.render(n.a.createElement(l.a,{store:$e},n.a.createElement(Te,{value:{articleService:Xe}},n.a.createElement(i.a,null,n.a.createElement(Ye,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,a){e.exports=a.p+"static/media/spinner.3b84cf99.svg"}},[[100,1,2]]]);
//# sourceMappingURL=main.8879345e.chunk.js.map